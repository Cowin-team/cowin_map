(()=>{"use strict";var e,t=new class{constructor(){this.state={shouldHaveCovidBeds:!1,shouldHaveOxygenBeds:!1,shouldHaveICUs:!1,shouldHaveVentilators:!1}}getCurrentSelection(){return this.state}setEventListeners(){let e=this;document.querySelectorAll(".filters_form input").forEach((function(t){console.log(t),t.addEventListener("change",(t=>{e.filterChanged(t.target)}))}))}filterChanged(e){let t=e.dataset.filterName;"show_covid_beds"==t?this.state.shouldHaveCovidBeds=e.checked:"show_oxygen_beds"==t?this.state.shouldHaveOxygenBeds=e.checked:"show_icus"==t?this.state.shouldHaveICUs=e.checked:"show_ventilators"==t&&(this.state.shouldHaveVentilators=e.checked);var n=new CustomEvent("filtersChanged",{detail:{checkedFilterNames:[]}});window.dispatchEvent(n)}},n=[],s=[];function o(e){let t={title:e[0],latitude:parseFloat(e[2]),longitude:parseFloat(e[3]),url:e[4],covidbed:e[5],oxybed:e[6],icu:e[7],venti:e[8],updatedAt:e[9]};return void 0===t.covidbed&&(t.covidbed="N/A"),void 0===t.oxybed&&(t.oxybed="N/A"),void 0===t.icu&&(t.icu="N/A"),void 0===t.venti&&(t.venti="N/A"),t}function a(t,n){let s=new google.maps.LatLngBounds;n.forEach((function(n){let o=!0;null!=t&&(t.shouldHaveCovidBeds&&!n.hasCovidBeds||t.shouldHaveOxygenBeds&&!n.hasOxygenBeds||t.shouldHaveICUs&&!n.hasICUs||t.shouldHaveVentilators&&!n.hasVentilators)&&(o=!1),o?(n.mapMarker.setMap(e),isNaN(n.location.latitude)||isNaN(n.location.longitude)||s.extend(n.mapMarker.position)):n.mapMarker.setMap(null)})),e.fitBounds(s)}function d(e,t,n){let s={lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},o=new google.maps.Marker({position:s,map:null,title:t.title}),a=`\n    <div class="content">\n      <h5 class="title is-5 mb-0">\n       ${void 0===t.url?t.title:'<a href="'+t.url+'">'+t.title+"</a>"}\n      </h5>\n      <p class="is-size-7 mt-1">Updated at: ${t.updatedAt}</p>\n      <table class="table has-text-left is-striped is-narrow is-hoverable">\n        <tr><th>COVID Beds: </th><td>${t.covidbed}</td></tr>\n        <tr><th>Oxygen Beds: </th><td>${t.oxybed}</td></tr>\n        <tr><th>ICUs: </th><td>${t.icu}</td></tr>\n        <tr><th>Ventilators: </th><td>${t.venti}</td></tr>\n      </table>\n    </div>\n  `;function d(e){return!(void 0===t[e]||""===t[e]||isNaN(t[e])||parseFloat(t[e])<1)}return google.maps.event.addListener(o,"click",(function(){n.setContent(a),n.open(e,o)})),{location:t,mapMarker:o,hasCovidBeds:d("covidbed"),hasOxygenBeds:d("oxybed"),hasICUs:d("icu"),hasVentilators:d("venti")}}document.addEventListener("DOMContentLoaded",(e=>{t.setEventListeners()})),window.addEventListener("filtersChanged",(function(e){a(t.getCurrentSelection(),s)})),window.initialiseMap=function(){e=new google.maps.Map(document.getElementById("map"),{zoom:10,center:new google.maps.LatLng(0,0)});let t=new google.maps.InfoWindow({content:"Content String"}),i={coimbatore:{bedsSpreadheetId:"1WW1Lu7S8zP85Qzv-Pn7gp_KUxPJZzvrXnGoWOkwcdbw"},tripur:{bedsSpreadheetId:"1T5fUP5nhCctC2bpNWeO4Yg2UYrewbTxrGh58c2zJePU"}};for(const l in i){let r=`https://sheets.googleapis.com/v4/spreadsheets/${i[l].bedsSpreadheetId}/values/Sheet1!A2:Q?key=AIzaSyClGVndCtMIDvZ7GdE1fO5OPQL5XdtMvVM`;$.getJSON(r,(function(i){i.values.forEach((function(e){let t=o(e);n.push(t)})),n.forEach((function(n){s.push(d(e,n,t))})),a(null,s)}))}}})();
//# sourceMappingURL=map.js.map
(()=>{var e,t=[],o=[];function n(e){let t={title:e[0],latitude:parseFloat(e[2]),longitude:parseFloat(e[3]),url:e[4],covidbed:e[5],oxybed:e[6],icu:e[7],venti:e[8],updatedAt:e[9]};return void 0===t.covidbed&&(t.covidbed="N/A"),void 0===t.oxybed&&(t.oxybed="N/A"),void 0===t.icu&&(t.icu="N/A"),void 0===t.venti&&(t.venti="N/A"),t}function s(t,o){let n=new google.maps.LatLngBounds;o.forEach((function(o){let s=!0;null!=t&&(t.shouldHaveCovidBeds&&!o.hasCovidBeds||t.shouldHaveOxygenBeds&&!o.hasOxygenBeds||t.shouldHaveICUs&&!o.hasICUs||t.shouldHaveVentilators&&!o.hasVentilators)&&(s=!1),s?(o.mapMarker.setMap(e),isNaN(o.location.latitude)||isNaN(o.location.longitude)||n.extend(o.mapMarker.position)):o.mapMarker.setMap(null)})),e.fitBounds(n)}function a(e,t,o){let n={lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},s=new google.maps.Marker({position:n,map:null,title:t.title}),a=`\n    <div class="content">\n      <h5 class="title is-5 mb-0">\n       ${void 0===t.url?t.title:'<a href="'+t.url+'">'+t.title+"</a>"}\n      </h5>\n      <p class="is-size-7 mt-1">Updated at: ${t.updatedAt}</p>\n      <table class="table has-text-left is-striped is-narrow is-hoverable">\n        <tr><th>COVID Beds: </th><td>${t.covidbed}</td></tr>\n        <tr><th>Oxygen Beds: </th><td>${t.oxybed}</td></tr>\n        <tr><th>ICUs: </th><td>${t.icu}</td></tr>\n        <tr><th>Ventilators: </th><td>${t.venti}</td></tr>\n      </table>\n    </div>\n  `;function d(e){return!(void 0===t[e]||""===t[e]||isNaN(t[e])||parseFloat(t[e])<1)}return google.maps.event.addListener(s,"click",(function(){o.setContent(a),o.open(e,s)})),{location:t,mapMarker:s,hasCovidBeds:d("covidbed"),hasOxygenBeds:d("oxybed"),hasICUs:d("icu"),hasVentilators:d("venti")}}window.addEventListener("filtersChanged",(function(e){let t={shouldHaveCovidBeds:!1,shouldHaveOxygenBeds:!1,shouldHaveICUs:!1,shouldHaveVentilators:!1};e.detail.checkedFilterNames.forEach((function(e){"show_covid_beds"==e?t.shouldHaveCovidBeds=!0:"show_oxygen_beds"==e?t.shouldHaveOxygenBeds=!0:"show_icus"==e?t.shouldHaveICUs=!0:"show_ventilators"==e&&(t.shouldHaveVentilators=!0)})),s(t,o)})),window.initialiseMap=function(){e=new google.maps.Map(document.getElementById("map"),{zoom:10,center:new google.maps.LatLng(0,0)});let d=new google.maps.InfoWindow({content:"Content String"}),i={coimbatore:{bedsSpreadheetId:"1WW1Lu7S8zP85Qzv-Pn7gp_KUxPJZzvrXnGoWOkwcdbw"},tripur:{bedsSpreadheetId:"1T5fUP5nhCctC2bpNWeO4Yg2UYrewbTxrGh58c2zJePU"}};for(const l in i){let r=`https://sheets.googleapis.com/v4/spreadsheets/${i[l].bedsSpreadheetId}/values/Sheet1!A2:Q?key=AIzaSyClGVndCtMIDvZ7GdE1fO5OPQL5XdtMvVM`;$.getJSON(r,(function(i){i.values.forEach((function(e){let o=n(e);t.push(o)})),t.forEach((function(t){o.push(a(e,t,d))})),s(null,o)}))}}})();
//# sourceMappingURL=map.js.map
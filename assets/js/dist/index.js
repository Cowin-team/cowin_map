(()=>{"use strict";const t="AIzaSyClGVndCtMIDvZ7GdE1fO5OPQL5XdtMvVM";var e=class{constructor(t,e,s){this.name=t,this.spreadsheetIds=e,this.afterFetchCallback=s,this.covidBedLocations=[],this.covidBedMarkers=[],this.fetchCovidBedData(),this.oxygenSupplyLocations=[],this.oxygenSupplyMarkers=[],void 0!==e.oxygenSupply&&this.fetchOxygemSupplyData()}fetchCovidBedData(){let e=`https://sheets.googleapis.com/v4/spreadsheets/${this.spreadsheetIds.covidBeds}/values/Sheet1!A2:Q?key=${t}`;fetch(e).then((t=>t.json())).then((t=>{t.values.forEach((t=>{let e=new class{constructor(t){this.title=t[0],this.latitude=parseFloat(t[2]),this.longitude=parseFloat(t[3]),this.url=t[4],this.covidbed=void 0===t[5]?"N/A":t[5],this.oxybed=void 0===t[6]?"N/A":t[6],this.icu=void 0===t[7]?"N/A":t[7],this.venti=void 0===t[8]?"N/A":t[8],this.updatedAt=t[9],this.position={lat:this.latitude,lng:this.longitude},this.hasCovidBeds=this.hasAttribute("covidbed"),this.hasOxygenBeds=this.hasAttribute("oxybed"),this.hasICUs=this.hasAttribute("icu"),this.hasVentilators=this.hasAttribute("venti")}hasAttribute(t){return!(void 0===this[t]||""===this[t]||isNaN(this[t])||parseFloat(this[t])<1)}}(t);this.covidBedLocations.push(e),this.covidBedMarkers.push(new class{constructor(t){this.location=t,this.marker=new google.maps.Marker({position:t.position,map:null,title:t.title}),this.position=this.marker.position,this.descriptionHtml=`\n      <div class="content">\n        <h5 class="title is-5 mb-0">\n         ${void 0===t.url?t.title:'<a href="'+t.url+'">'+t.title+"</a>"}\n        </h5>\n        <p class="is-size-7 mt-1">Updated at: ${t.updatedAt}</p>\n        <table class="table has-text-left is-striped is-narrow is-hoverable">\n          <tr><th>COVID Beds: </th><td>${t.covidbed}</td></tr>\n          <tr><th>Oxygen Beds: </th><td>${t.oxybed}</td></tr>\n          <tr><th>ICUs: </th><td>${t.icu}</td></tr>\n          <tr><th>Ventilators: </th><td>${t.venti}</td></tr>\n        </table>\n      </div>\n    `}setMap(t){this.marker.setMap(t)}}(e))})),this.afterFetchCallback(this.covidBedMarkers)}))}fetchOxygemSupplyData(){let e=`https://sheets.googleapis.com/v4/spreadsheets/${this.spreadsheetIds.oxygenSupply}/values/Sheet1!A2:Q?key=${t}`;fetch(e).then((t=>t.json())).then((t=>{t.values.forEach((t=>{let e=new class{constructor(t){this.title=t[0],this.latitude=parseFloat(t[2]),this.longitude=parseFloat(t[3]),this.url=t[4],this.hasRefilling=this.parseYesOrNo(t[5]),this.hasCylinders=this.parseYesOrNo(t[6]),this.hasCans=this.parseYesOrNo(t[7]),this.hasConcentrator=this.parseYesOrNo(t[8]),this.additionalInfo=t[9],this.updatedAt=t[10],this.position={lat:this.latitude,lng:this.longitude}}parseYesOrNo(t){return"yes"==(t=t.toLowerCase().trim())||"no"!=t&&void 0}}(t);this.oxygenSupplyLocations.push(e),this.oxygenSupplyMarkers.push(new class{constructor(t){this.location=t,this.marker=new google.maps.Marker({position:t.position,map:null,title:t.title,icon:"/assets/images/oxygen.png"}),this.position=this.marker.position,this.descriptionHtml=`\n      <div class="content">\n        <h5 class="title is-5 mb-0">\n         ${void 0===t.url?t.title:'<a href="'+t.url+'">'+t.title+"</a>"}\n        </h5>\n        <p class="is-size-7 mt-1">Updated at: ${t.updatedAt}</p>\n        <table class="table has-text-left is-striped is-narrow is-hoverable">\n          <tr><th>Oxygen Refilling</th><td>${t.hasRefilling?"Yes":"No"}</td></tr>\n          <tr><th>Oxygen Cylinders</th><td>${t.hasCylinders?"Yes":"No"}</td></tr>\n          <tr><th>Oxygen Cans</th><td>${t.hasCans?"Yes":"No"}</td></tr>\n          <tr><th>Oxygen Concentrator</th><td>${t.hasConcentrator?"Yes":"No"}</td></tr>\n        </table>\n        <p>\n        <strong>\n          Additional info:\n        </strong>\n        ${t.additionalInfo}\n        </p>\n      </div>\n    `}setMap(t){this.marker.setMap(t)}}(e)),console.log(e)})),this.afterFetchCallback(this.oxygenSupplyMarkers)}))}};window.initialiseMap=function(){let t=new class{constructor(){this.map=null,this.initialiseMap(),this.markerInfoWindow=new google.maps.InfoWindow({content:""}),this.cowinMapMarkers=[],this.bounds=new google.maps.LatLngBounds,this.mapFilters=new class{constructor(t){this.state={shouldHaveCovidBeds:!1,shouldHaveOxygenBeds:!1,shouldHaveICUs:!1,shouldHaveVentilators:!1},this.setEventListeners(),this.onChangeCallback=t}setEventListeners(){let t=this;document.querySelectorAll(".filters_form input").forEach((function(e){e.addEventListener("change",(e=>{t.filterChanged(e.target)}))}))}filterChanged(t){let e=t.dataset.filterName;"show_covid_beds"==e?this.state.shouldHaveCovidBeds=t.checked:"show_oxygen_beds"==e?this.state.shouldHaveOxygenBeds=t.checked:"show_icus"==e?this.state.shouldHaveICUs=t.checked:"show_ventilators"==e&&(this.state.shouldHaveVentilators=t.checked),this.onChangeCallback(this.state)}shouldShowLocation(t){return!(this.state.shouldHaveCovidBeds&&!t.hasCovidBeds||this.state.shouldHaveOxygenBeds&&!t.hasOxygenBeds||this.state.shouldHaveICUs&&!t.hasICUs||this.state.shouldHaveVentilators&&!t.hasVentilators)}}((t=>{this.plotAllCowinMapMarkers()}))}initialiseMap(){this.map=new google.maps.Map(document.getElementById("map"),{zoom:10,center:new google.maps.LatLng(11.0117016,76.8971953)}),navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{const e={lat:t.coords.latitude,lng:t.coords.longitude};this.map.setCenter(e)}),(()=>{this.map.setCenter(new google.maps.LatLng(11.0117016,76.8971953))})):this.map.setCenter(new google.maps.LatLng(11.0117016,76.8971953))}setupAndPlotCowinMapMarker(t){google.maps.event.addListener(t.marker,"click",(()=>{this.markerInfoWindow.setContent(t.descriptionHtml),this.markerInfoWindow.open(this.map,t.marker)})),this.cowinMapMarkers.push(t)}plotCowinMapMarker(t){this.mapFilters.shouldShowLocation(t.location)?(t.setMap(this.map),isNaN(t.location.latitude)||isNaN(t.location.longitude)||this.bounds.extend(t.position)):t.setMap(null)}plotAllCowinMapMarkers(){this.cowinMapMarkers.forEach((t=>{this.plotCowinMapMarker(t)}))}},s=e=>{e.forEach((e=>{t.setupAndPlotCowinMapMarker(e)})),t.plotAllCowinMapMarkers()};new e("Ariyalur",{covidBeds:"12Dmi6ISJQUDIkhbRZ_py4n_IQHJRN1pnuBEOA7tv5ko"},s),new e("Chengalpattu",{covidBeds:"1OlpEEumoFhNDgnFxe6WIe78A8SlhSYHVQorVbOK1Uvo"},s),new e("Chennai",{covidBeds:"1YV3DWGxsvlTp0-vaw8f09AajQ5cl3MovFvWVVDtkbOc"},s),new e("coimbatore",{covidBeds:"1WW1Lu7S8zP85Qzv-Pn7gp_KUxPJZzvrXnGoWOkwcdbw",oxygenSupply:"1Ry3y1hx1iHeuF17YmWtzfaDQdhx5zRr6lSLrzBW_TU0"},s),new e("Cuddalore",{covidBeds:"1EH9C7FkWud1jjzj-7q7xQwPd4WpoMccVVtWl0oqq98U"},s),new e("Dharmapuri",{covidBeds:"1C1FJzyXNVa5-j0Q62mpjJFD1KRCBcqnBH1eOLAXYa70"},s),new e("Dindigul",{covidBeds:"1RPZhwn_Aw-g7o2pBgfe4r0MJe-1UjpQxGkWjzMsQTHY"},s),new e("Erode",{covidBeds:"16X-7DT_U_XLFYusN9z_tFypRre1suvJ8wkTHeb1YtCQ"},s),new e("Kallakurichi",{covidBeds:"18eJ4qiH1B906qdzaP58SIziTClCB0x_FpZxcl9oYz14"},s),new e("Kancheepuram",{covidBeds:"1JFeF1AtpCxRKy6Wb1Mfxq0wCT6M6ULFBvbGwBkMTzjc"},s),new e("Kanyakumari",{covidBeds:"1mmnz6UDlqkm3EqU6UdW7nqOAmyeZcSH14fftnO1rqh8"},s),new e("Karur",{covidBeds:"1yeSYSu9FJWQtxh5sfCBGfGJD62BzBmg4EgAefsaYbbg"},s),new e("Krishnagiri",{covidBeds:"1bkBE2k5zB7FlhsFHtpdzNKF7EKON_vKP7mjdCAZLt9Y"},s),new e("Madurai",{covidBeds:"1Dr7DYS6GKe5avhHcwhHMB6Z9DTFSj20eEgLvfBlQJSo"},s),new e("Nagapattinam",{covidBeds:"13O7rh6C3XCR3lSkujGFh6iEdMu0sxnb14sqZEXfrxPw"},s),new e("Namakkal",{covidBeds:"1RP_dDLl4a49_hq-Mp39WWiZiNXKOq5wUBkq1iw7hSFY"},s),new e("Nilgiris",{covidBeds:"1CUH-nT9LjD3aIt502segS9CPdz60oq9JdRy4ZvuXETc"},s),new e("Preambalur",{covidBeds:"1nWkVDXRxuWI6dAYLtDo4eNvSW8FggvNuHCoL27B8qCw"},s),new e("Pudukottai",{covidBeds:"1od8JhGoSmn0r66PQCxV4j9oJoJ-RJNbCginMBtnV_60"},s),new e("Ramanathapuram",{covidBeds:"1szYIqEjXO9DPZXH6z8TbIrlKjLoPT0V5MwHiZkXb0ag"},s),new e("Ranipet",{covidBeds:"1c9xo2XBRXjr6tU4AlZWh2VzSGPPJsOKTZC_vsX5tJgM"},s),new e("Salem",{covidBeds:"1GlNu4jyK_nkI2KwEBe9Wc6qgW1bCxbrH9v8cUJDJWrs"},s),new e("Sivagangai",{covidBeds:"1wGN_t4TW70RNvNhg259Tb8Cc5bli73vrMIDuGH8zFhM"},s),new e("Tenkasi",{covidBeds:"1Rjn8tzK_DuKzbGE3FRHAK9klpbsk7nasfDi8hWYG_Xo"},s),new e("Thanjavur",{covidBeds:"12wJXWn2ropifcuAEj6KZxyNkkJzZBYjjG7r-5WVjgT4"},s),new e("Theni",{covidBeds:"1xgvC0LSHJ4gedshTMEjlqOqM7OIlRFmlgD5z_CdL8jQ"},s),new e("Thirupathur",{covidBeds:"1x8_36yw3M51tdYHUAj-BaQfZCqFSgkS2A666XPxO3Jo"},s),new e("Thiruvarur",{covidBeds:"1GUsyRy-wWrQ0VWRUe_V2ZHhKIz9z_K3Q6ZkPtlICpSk"},s),new e("Thoothukudi",{covidBeds:"1CliAXv8Ws8tmu1yGzFo5TgOYVdUrPW9Et7KU-fvm-3k"},s),new e("Thirunelveli",{covidBeds:"124dWtrpcunekPx-AGyoNDD6cgFKEYFc63BYXCadl4Kw"},s),new e("Tirupur",{covidBeds:"1T5fUP5nhCctC2bpNWeO4Yg2UYrewbTxrGh58c2zJePU"},s),new e("Thiruvallur",{covidBeds:"1v0Qiew7dauoum8E_3p6GdL13TL0HmCT_Ruz5_7EdMGQ"},s),new e("Thiruvannamalai",{covidBeds:"1L9Mll_3sD709TOsYXRr8sxZgbAqqKNtjtWLkdqqR9JE"},s),new e("Vellore",{covidBeds:"1NFfB_ApMAmU9t6LHV78Ohh4wnda4kSlLgMA394koB0c"},s),new e("Villupuram",{covidBeds:"1S-SB3KLbKyyt_XWQDI0qnwIf2kiKrH5PlDe_NgiumJA"},s),new e("Virudhunagar",{covidBeds:"1NIECJ0FGqMSJ5yY72gfk-C-F3K8EhnhJGMC0tQs8CZ0"},s)}})();
//# sourceMappingURL=index.js.map